{
    "collab_server" : "",
    "contents" : "library(jsonlite)\n#---------------------------------\nartistInfo <- function(name){\nreq <-httr::GET(paste(\"https://www.vagalume.com.br/\",name,\"/index.js\"))\njson <-httr::content(req)\ncont <- fromJSON(json)\n\nartist <- data.frame(id = cont$artist$id,\n                     name = cont$artist$desc,\n                     views = cont$artist$rank$views,\n                     pos = cont$artist$rank$pos,\n                     period = cont$artist$rank$period,\n                     uniques = cont$artist$rank$uniques,\n                     points = cont$artist$rank$points)\nreturn(artist)\n}\n\nrelatedInfo <- function(name){\n  req <-httr::GET(paste(\"https://www.vagalume.com.br/\",name,\"/index.js\"))\n  json1<-httr::content(req)\n  cont <- fromJSON(json1)\n  rel <- data.frame(id = cont$artist$id,\n                    name = cont$artist$desc,\n                    id.rel = cont$artist$related$id,\n                    related = cont$artist$related$name)\n  return(rel)\n}                  \n\ntopLyrics(\"regina-spektor\")                  \n\ntopLyrics <- function(name){\n  req <-httr::GET(paste(\"https://www.vagalume.com.br/\",name,\"/index.js\"))\n  json1<-httr::content(req)\n  cont <- fromJSON(json1)\n  \n  top <- data.frame(id = cont$artist$id,\n                    name = cont$artist$desc,\n                    id.top = cont$artist$toplyrics$item$id,\n                    song = cont$artist$toplyrics$item$desc)\n  return(top)\n}\n\n#---------\nlibrary(plyr)\n\nmusNames <- function(name){\nreq <-httr::GET(paste(\"https://www.vagalume.com.br/\",name,\"/index.js\"))\njson1<-httr::content(req)\ncont <- fromJSON(json1)\n\nmus <- data.frame(id = cont$artist$id,\n                  name = cont$artist$desc,\n                  id.song = cont$artist$lyrics$item$id,\n                  song = cont$artist$lyrics$item$desc)\nreturn(mus)\n}\n#-------------\n\nidentifier <- \"the-call\"\nartist <- \"regina-spektor\"\ntype = \"name\"  \n#-----------\nlyrics <- function(identifier, type, artist){\n  if(type == \"id\"){\n    req2 <-httr::GET(paste(\"https://api.vagalume.com.br/search.php?musid=\",identifier,\"&apikey={key}\"))\n  }\n  if(type == \"name\"){\n    req2 <- httr::GET(paste(\"https://api.vagalume.com.br/search.php?art=\",artist,\"&mus=\",identifier,\"&extra=relmus&apikey={key}\"))\n  }\n  \n  cont2 <- httr::content(req2)\n  \n  l <- lapply(cont2$mus, \"[\", c(\"id\", \"name\", \"lang\", \"text\"))\n  l <- ldply(l, data.frame)\n  \n  mus <- data.frame(id = cont2$art$id,\n                    name = cont2$art$name,\n                    song.id = l$id,\n                    song = l$name,\n                    language = l$name,\n                    text = l$text)\n  mus$text <- as.character(mus$text)\n  mus$text <- str_replace_all(mus$text, \"[\\n]\" , \" \")\n  \n  if(cont2$mus[[1]]$lang > 1){\n    tr <- lapply(cont2$mus[[1]]$translate, \"[\", c(\"text\"))\n    tr <- ldply(tr, data.frame)\n    mus <- data.frame(mus, tr$text)\n    mus$tr.text <- as.character(mus$tr.text)\n    mus$tr.text <- str_replace_all(mus$tr.text, \"[\\n]\" , \" \")\n    }\n  \n  return(mus)  \n}\n\n#-------------\ndisc <- function(name){\n  req <-httr::GET(paste(\"https://www.vagalume.com.br/\",name,\"/discografia/index.js\"))\n  json <-httr::content(req)\n   \n  cont <- fromJSON(json)\n\n  disc <- data.frame(album.id = cont$discography$item$id,\n                     album.name = cont$discography$item$desc,\n                     label = cont$discography$item$label,\n                     date = cont$discography$item$published)\n  \n  disc$id <-  cont$discography$artist$id\n  disc$name <-  cont$discography$artist$desc\n  \n  return(disc)\n}\ndisc(\"regina-spektor\")\n#-----------------\n# \n# library(curl)\n# library(purrr)\n# \n# musicNames <- function(name){\n#   req <-httr::GET(paste(\"https://www.vagalume.com.br/\",name,\"/discografia/index.js\"))\n#   json1<-httr::content(req)\n#   cont <- fromJSON(json1)\n#   \n#   m <- flatten(cont$discography$item$discs)\n#   n <- ldply(m, data.frame)\n#   \n#   musN <- data.frame(id = n$id, \n#                      name = n$desc,\n#                      url = n$url)\n#   \n#   return(musN)\n# }\n# songNames(\"regina-spektor\")\n# musicNames(\"regina-spektor\")\n#-----------\n\n\n\n## getGenres\n",
    "created" : 1499825451787.000,
    "dirty" : true,
    "encoding" : "",
    "folds" : "",
    "hash" : "1162808565",
    "id" : "319857C8",
    "lastKnownWriteTime" : 2315732155208049267,
    "last_content_update" : 1499887059106,
    "path" : null,
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}